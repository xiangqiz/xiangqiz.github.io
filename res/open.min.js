/*!
 * Copyright &copy; 2012-2013 <a href="https://github.com/thinkgem/jeesite">JeeSite</a> All rights reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 */
function include(c,m,e){if(document.getElementById(c)==null){var a=typeof e=="string"?[e]:e;for(var f=0;f<a.length;f++){var b=a[f].replace(/^\s|\s$/g,"");var h=b.split(".");var d=h[h.length-1].toLowerCase();var k=d=="css";var l=k?"link":"script";var g=k?" type='text/css' rel='stylesheet' ":" type='text/javascript' ";var j=(k?"href":"src")+"='"+m+b+"'";document.write("<"+l+(f==0?" id="+c:"")+g+j+"></"+l+">")}}}function windowOpen(d,c,e,a){var g=parseInt((window.screen.height-a)/2,10),f=parseInt((window.screen.width-e)/2,10),b="location=no,menubar=no,toolbar=no,dependent=yes,minimizable=no,modal=yes,alwaysRaised=yes,resizable=yes,scrollbars=yes,width="+e+",height="+a+",top="+g+",left="+f;window.open(d,c,b)}function loading(a){top.$.jBox.tip.mess=null;top.$.jBox.tip(a,"loading",{opacity:0})}function confirmx(b,a){top.$.jBox.confirm(b,"系统提示",function(c,d,e){if(c=="ok"){loading("正在提交，请稍等...");location=a}},{buttonsFocus:1});top.$(".jbox-body .jbox-icon").css("top","55px");return false}$.validator.setDefaults({submitHandler:function(a){loading("正在提交，请稍等...");a.submit()},errorPlacement:function(a,b){$("#messageBox").text("输入有误，请先更正！").removeClass("alert-success").addClass("alert-error");if(b.is(":checkbox")||b.is(":radio")||b.parent().is(".input-append")){a.appendTo(b.parent().parent())}else{a.insertAfter(b)}}});function tableSort(f){var c={orderBy:"#orderBy",contentTable:"#contentTable",sortClass:"sort",callBack:$.noop};var a=$.extend({},c,f);var b=$(a.orderBy),e=$(a.contentTable+" th."+a.sortClass),d=b.val().split(" ");e.each(function(){if($(this).hasClass(d[0])){d[1]=d[1]&&d[1].toUpperCase()=="DESC"?"down":"up";$(this).html($(this).html()+' <i class="icon icon-arrow-'+d[1]+'"></i>')}});e.click(function(){var g=$(this).attr("class").split(" "),j=b.val().split(" ");for(var h=0;h<g.length;h++){if(g[h]==a.sortClass){g=g[h+1];break}}if(g==j[0]){j=(j[1]&&j[1].toUpperCase()=="DESC"?"ASC":"DESC");
b.val(g+" DESC"!=g+" "+j?"":g+" "+j)}else{b.val(g+" ASC")}a.callBack()})}$(document).ready(function(){$("select").select2();
(function(window,document,undefined){
        var hearts = [];
        window.requestAnimationFrame = (function(){
                return window.requestAnimationFrame || 
                           window.webkitRequestAnimationFrame ||
                           window.mozRequestAnimationFrame ||
                           window.oRequestAnimationFrame ||
                           window.msRequestAnimationFrame ||
                           function (callback){
                                   setTimeout(callback,1000/60);
                           }
        })();
        init();
        function init(){
                css(".heart{width: 10px;height: 10px;position: fixed;background: #f00;transform: rotate(45deg);-webkit-transform: rotate(45deg);-moz-transform: rotate(45deg);}.heart:after,.heart:before{content: '';width: inherit;height: inherit;background: inherit;border-radius: 50%;-webkit-border-radius: 50%;-moz-border-radius: 50%;position: absolute;}.heart:after{top: -5px;}.heart:before{left: -5px;}");
                attachEvent();
                gameloop();
		fnTextPopup();
        }
	function fnTextPopup() {
		arr = ['富强', '民主', '文明', '和谐', '自由', '平等', '公正', '法治', '爱国', '敬业', '诚信', '友善'];
		if(!arr || !arr.length) {
			return;
		}
		var index = 0;
		document.documentElement.addEventListener('click', function(event) {
			var x = event.pageX,
				y = event.pageY;
			var eleText = document.createElement('span');
			eleText.className = 'text-popup';
			this.appendChild(eleText);
			if(arr[index]) {
				eleText.innerHTML = arr[index];
			} else {
				index = 0;
				eleText.innerHTML = arr[0];
			}
			eleText.addEventListener('animationend', function() {
				eleText.parentNode.removeChild(eleText);
			});
			eleText.style.left = (x - eleText.clientWidth / 2) + 'px';
			eleText.style.top = (y - eleText.clientHeight) + 'px';
			index++;
		});
	}
        function gameloop(){
                for(var i=0;i<hearts.length;i++){
                    if(hearts[i].alpha <=0){
                            document.body.removeChild(hearts[i].el);
                            hearts.splice(i,1);
                            continue;
                    }
                    hearts[i].y--;
                    hearts[i].scale += 0.004;
                    hearts[i].alpha -= 0.013;
                    hearts[i].el.style.cssText = "left:"+hearts[i].x+"px;top:"+hearts[i].y+"px;opacity:"+hearts[i].alpha+";transform:scale("+hearts[i].scale+","+hearts[i].scale+") rotate(45deg);background:"+hearts[i].color;
            }
            requestAnimationFrame(gameloop);
        }
        function attachEvent(){
                var old = typeof window.onclick==="function" && window.onclick;
                window.onclick = function(event){
                        old && old();
                        createHeart(event);
                }
        }
        function createHeart(event){
            var d = document.createElement("div");
            d.className = "heart";
            hearts.push({
                    el : d,
                    x : event.clientX - 5,
                    y : event.clientY - 5,
                    scale : 1,
                    alpha : 1,
                    color : randomColor()
            });
            document.body.appendChild(d);
    }
    function css(css){
            var style = document.createElement("style");
                style.type="text/css";
                try{
                    style.appendChild(document.createTextNode(css));
                }catch(ex){
                    style.styleSheet.cssText = css;
                }
                document.getElementsByTagName('head')[0].appendChild(style);
    }
        function randomColor(){
                return "rgb("+(~~(Math.random()*255))+","+(~~(Math.random()*255))+","+(~~(Math.random()*255))+")";
        }
})(window,document);
});
